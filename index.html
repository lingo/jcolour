<!DOCTYPE HTML>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title></title>
    <script src="jquery.min.js"></script>
	<script src="sprintf.js" type="text/javascript"></script>
	<script src="colour.js" type="text/javascript"></script>
	<script src="color.js" type="text/javascript"></script>
	<style type="text/css">
	
		.box {
			display: block;
			float: left;
			width: 32px;
			height: 32px;
			_border: 1px dotted black;
		}
	</style>
</head>
<body>

<h1>JQuery.colour demo</h1>
<div id='boxes'>
</div>

<script type="text/javascript">

	$(function() {
		var ROWS=12, COLS=12;
		var ctr = $('#boxes');
		for(var j=0; j < ROWS; j++) {
			var style='style="clear:left"';
			for(var i=0; i < COLS; i++) {
				ctr.append('<div class="box" ' + style + '></div>');
				style = '';
			}
		}
		var c1 = new Colr(), c2 = new Colr();//.darken(0.2); //$.colour.darken($.colour.random(), 0.2);
		$('.box').click(function(e) {
			c1 = new Colr();
			c2 = new Colr();//.darken(0.2); //$.colour.darken($.colour.random(), 0.2);
			var boxes = $('.box');
			var step = 1.0 / boxes.length;
			var lg = 0;
			boxes.each(function(idx,x) {
				lg += step;
				var c3 = c1.blend(c2, lg);
				console.log(idx, lg, c3.css());
				$(x).css({background: c3.css()});
			});
			//$('.box:first').css({background: c1.css()});
			//$('.box:last').css({background: c2.css()});
		});
		var b = $('.box:first'); 
		var maxdist = (ROWS*b.height())*(ROWS*b.height()) + (COLS*b.width())*(COLS*b.width());
		maxdist /= 4;
		$(document).mousemove(function(e) {
			$('.box').each(function(i,x) {
				var T=$(x);
				var O = T.offset();
				var dx = (e.pageX - O.left), dy = e.pageY - O.top;
				var step = (dx*dx + dy*dy) / maxdist;
				var c = c1.blend(c2, step);
				T.css({background: c.css()});
			});
		});
	});
</script>
</body>
</html>
