!function(t,r){function s(t){if("object"==typeof t&&3===t.length)return t
if("string"!=typeof t)return t
var r,s,e
return t=t.match(/[a-fA-F0-9]{2}/g),r=t[0],s=t[1],e=t[2],[parseInt(r,16),parseInt(s,16),parseInt(e,16)]}function e(t){if("object"==typeof t&&t instanceof e)return this._css=t._css,this.clr=t.clr.slice(),this.type=t.type,r
if("object"==typeof t&&t.clr)return this.clr=t.clr.slice(),this.type=t.type,r
"string"!=typeof t&&(t=e.random()),this.type="rgb",this._css=t,this.clr=[],t=t.replace(/^#/,"")
var h,i,n,c,l,o;(h=t.match(/rgba\s*\(([^,]+),([^,]+),([^,]+),([^)]+)\)/))?(i=h[1],n=h[2],c=h[3],o=h[4],l=[parseInt(i,10),parseInt(n,10),parseInt(c,10),parseFloat(o,10)]):(h=t.match(/rgb\s*\(([^,]+),([^,]+),([^)]+)\)/))?(i=h[1],n=h[2],c=h[3],l=[parseInt(i,10),parseInt(n,10),parseInt(c,10),1]):(h=t.match(/hsla\s*\(([^,]+),([^,]+),([^,]+),([^)]+)\)/))?(this.type="hsl",h.shift(),h[0]=parseInt(h[0],10),h[1]=parseInt(h[1],10),h[2]=parseInt(h[2],10),l=h,l.push(parseFloat(h[3]))):(h=t.match(/hsl\s*\(([^,]+),([^,]+),([^)]+)\)/))?(this.type="hsl",h.shift(),h[0]=parseInt(h[0],10),h[1]=parseInt(h[1],10),h[2]=parseInt(h[2],10),l=h,l.push(1)):t.match(/^[a-fA-F0-9]{6}$/)?(l=s(t),l.push(1)):(h=t.match(/^[a-fA-F0-9]{3}$/))&&(h=h[0].split(""),i=h[0],n=h[1],c=h[2],i=parseInt(i,16),n=parseInt(n,16),c=parseInt(c,16),i=16*i+i,n=16*n+n,c=16*c+c,l=[i,n,c,1]),this.clr=l}e.prototype.clone=function(){return new e(this)},e.prototype.blend=function(t,s){r===s&&(s=.5),s=Math.max(0,Math.min(1,s)),t=new e(t)
var h,i,n=new e,c=this.clr,l=t.clr
if(!c||!l)return new e(this)
for(h=0;3>h;h++)i=l[h]-c[h],n.clr[h]=c[h]+i*s,this.DEBUG&&_console.log("Colour.blend",c[h],l[h],i,n[h])
return n.type="rgb",n},e.prototype.blendhsl=function(t,s){r===s&&(s=.5),s=Math.max(0,Math.min(1,s)),t=new e(t).hsl()
var h,i,n=(new e).hsl(),c=this.clr,l=t.clr
if(!c||!l)return new e(this)
for(h=0;3>h;h++)i=l[h]-c[h],n.clr[h]=c[h]+i*s,this.DEBUG&&_console.log("Colour.blend",c[h],l[h],i,n[h])
return n.type="hsl",n},e.prototype.darken=function(t){r===t&&(t=.5)
var s=this.hsl()
return s.clr[2]*=1-t,s},e.prototype.lighten=function(t){r===t&&(t=.5)
var s=this.hsl()
return s.clr[2]+=s.clr[2]*t,s},e.prototype.css=function(t){switch(r===t&&(t=this.type),t){case"hsl":this._css="hsla("+this.clr[0]+", "+this.clr[1]+"%, "+this.clr[2]+"%, "+this.clr[3]+")"
break
case"rgb":this._css="rgba("+parseInt(this.clr[0],10)+", "+parseInt(this.clr[1],10)+", "+parseInt(this.clr[2],10)+", "+this.clr[3]+")"
break
case"hex":this.rgb()
var s,e,h
s=parseInt(this.clr[0],10),s=s.toString(16),s=s.length<2?"0"+s:s,e=parseInt(this.clr[1],10),e=e.toString(16),e=e.length<2?"0"+e:e,h=parseInt(this.clr[2],10),h=h.toString(16),h=h.length<2?"0"+h:h,this._css="#"+s+e+h}return this._css},e.prototype.hsl=function(){if("hsl"==this.type)return this
var t,s,e,h,i,n,c,l,o,a,p=this.clr.slice()
for(h=0;3>h;h++)p[h]=p[h]/255
if(t=p[0],s=p[1],e=p[2],c=Math.max(t,s,e),l=Math.min(t,s,e),o=c-l,0===o)a=i=0
else switch(c){case t:a=(s-e)/o%6
break
case s:a=(e-t)/o+2
break
case e:a=(t-s)/o+4
break
default:a=i=0}return n=(c+l)/2,i===r&&(i=0===o?0:.5>=n?o/(2*n):o/(2-2*n)),a=60*a,this.type="hsl",this.clr=[a,100*i,100*n,1],this},e.prototype.rgb=function(){if("rgb"==this.type)return this
var t,r,s,e,h,i,n,c,l,o,a,p=this.clr.slice()
for(t=p[0],s=p[1]/100,r=p[2]/100,c=.5>=r?2*r*s:(2-2*r)*s,t/=60,n=c*(1-Math.abs(t%2-1)),l=r-c/2,e=h=i=0,1>t?(e=c,h=n):2>t?(e=n,h=c):3>t?(h=c,i=n):4>t?(h=n,i=c):5>t?(e=n,i=c):6>t&&(e=c,i=n),o=[e+l,h+l,i+l],a=0;3>a;a++)o[a]=255*o[a]
return o[3]=p[3],this.type="rgb",this.clr=o,this},e.prototype.hue=function(t){return this.hsl(),r!==t?(this.clr[0]=t,this):this.clr[0]},e.prototype.sat=function(t){return this.hsl(),r!==t?(this.clr[1]=t,this):this.clr[1]},e.prototype.light=function(t){return this.hsl(),r!==t?(this.clr[2]=t,this):this.clr[2]},e.prototype.alpha=function(t){return r!==t?(this.clr[3]=t,this):this.clr[3]},e.prototype.red=function(t){return this.rgb(),r!==t?(this.clr[0]=t,this):this.clr[0]},e.prototype.green=function(t){return this.rgb(),r!==t?(this.clr[1]=t,this):this.clr[1]},e.prototype.blue=function(t){return this.rgb(),r!==t?(this.clr[2]=t,this):this.clr[2]},e.random=function(){var t=function(t){return Math.floor(Math.random()*t)}
return"hsl("+t(360)+", "+t(100)+"%, "+t(100)+"%)"},e.prototype.toString=e.prototype.css,t.Colr=e}(window)
